<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>
    Debugging Akamai Headers - hack(pravj) | Pravendra Singh
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">

<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="My name is Pravendra Singh and I love playing with data. R(ETL)PL."/>
<meta name="keywords" content="blog, web, data, data visualization, golang, programming, python, Pravendra Singh, Pravendra, pravj, IIT, IIT Roorkee">
<meta name="author" content="Pravendra Singh">
<meta http-equiv="cleartype" content="on">

  <meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Pravendra Singh - Falling Leaves">
<meta property="og:title" content="Debugging Akamai Headers" />
<meta property="og:type" content="article" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="https://pravj.github.io/articles/debugging-akamai/" />
<meta property="og:description" content="If you&rsquo;ve got anything to do with Akamai&rsquo;s caching, surely there must have come a time where you needed to find out whether your content is being cached at Akamai.
Pragma Headers The easiest way to test whether your content is cached at Akamai is to do via custom Pragma headers. What are Pragma headers you might say? The HTTP Specification has a simple definition of Pragma headers.
 The Pragma general-header field is used to include implementation-specific directives that might apply to any recipient along the request/response chain." />

<meta property="og:image" content=" http://pravj.github.io/images/pravj-monu-art.jpg "/>

<meta property="article:author" content="https://www.facebook.com/hackpravj" />
<meta property="article:publisher" content="https://www.facebook.com/hackpravj" />

  <meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@hackpravj">
<meta name="twitter:creator" content="@hackpravj">
<meta name="twitter:title" content="Debugging Akamai Headers" />
<meta name="twitter:description" content="If you&rsquo;ve got anything to do with Akamai&rsquo;s caching, surely there must have come a time where you needed to find out whether your content is being cached at Akamai.
Pragma Headers The easiest way to test whether your content is cached at Akamai is to do via custom Pragma headers. What are Pragma headers you might say? The HTTP Specification has a simple definition of Pragma headers.
 The Pragma general-header field is used to include implementation-specific directives that might apply to any recipient along the request/response chain." />


<meta property="twitter:image" content=" http://pravj.github.io/images/pravj-monu-art.jpg "/>





  <link href='https://fonts.googleapis.com/css?family=Raleway:400|Source+Serif+Pro:400,300,600' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="https://pravj.github.io/styles.min.css">

  

  

  
  <link rel="apple-touch-icon" sizes="180x180" href="/images/header-images/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/images/header-images/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/header-images/favicon-16x16.png" sizes="16x16">
  <link rel="mask-icon" href="/images/header-images/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/header-images/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/images/header-images/favicon.ico">

  
  <link href="" rel="alternate" type="application/rss+xml" title="hack(pravj)" />


  
</head>


<body>
      <div class="post-header">
  <div class="container rrr">
    <div class="row">
      <div class="six columns">
        <h4><a href="/">PRAVENDRA SINGH</a></h4>
      </div>
      <div class="six columns">
        <nav>
          <ul class="nav-list">
            <li><a href="/about" title="About Me"><i class="icon-user"></i></a></li>
            <li><a href="/blog" title="Articles"><i class="icon-article-alt"></i></a></li>
            <li><a href="/projects" title="Projects"><i class="icon-github-circled"></i></a></li>
            <li><a href="/quotes" title="Quotes"><i class="icon-quote-left"></i></a></li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>




  <div class="container">
    <div class="row">

      <section>
            <h1 class="post-title">
              <a href="/articles/debugging-akamai/">Debugging Akamai Headers</a>
            </h1>

          <div class="post-content-meta">

            
              <i class="icon-calendar"></i>  
              <span class="post-date">
                <span class="post-date-month">February</span> 
                <span class="post-date-day"> 7, </span>
                <span class="post-date-year">2014</span>
              </span> 
            

            
            
                <span class="post-tag"> in </span>
                
                <a class="post-tag post-tag-akamai" href="https://pravj.github.io/tags/akamai">
                  <i class="icon-tag"></i>akamai</a>
                
            

         </div>

			

      <div class="post-content">
        

<p>If you&rsquo;ve got anything to do with Akamai&rsquo;s caching, surely there must have come a time where you needed to find out whether your content is being cached at Akamai.</p>

<h2 id="pragma-headers">Pragma Headers</h2>

<p>The easiest way to test whether your content is cached at Akamai is to do via custom Pragma headers. What are Pragma headers you might say? The HTTP Specification has a simple definition of Pragma headers.</p>

<blockquote>
<p>The Pragma general-header field is used to include implementation-specific directives that might apply to any recipient along the request/response chain. All pragma directives specify optional behavior from the viewpoint of the protocol.</p>
</blockquote>

<p>In short, Pragma headers specific cache headers<sup class="footnote-ref" id="fnref:1"><a rel="footnote" href="#fn:1">1</a></sup> that are can be used by any party in the entire chain from request-response (in our case Akamai) to communicate specific caching functionality.</p>

<p>Here&rsquo;s how you can do it -</p>

<pre><code>~ curl -H &quot;Pragma: akamai-x-cache-on&quot; -H &quot;Pragma: akamai-x-check-cacheable&quot; -I &quot;http://static.xcite.com/skin/frontend/orange/default/images/xcite_logo.png&quot;

HTTP/1.1 200 OK
Server: nginx/0.8.55
Content-Type: image/png
Last-Modified: Sun, 02 Feb 2014 00:29:51 GMT
ETag: &quot;26d8eb2-1c43-4f16181581dc0&quot;
Accept-Ranges: bytes
Content-Length: 7235
Cache-Control: max-age=2142389
Expires: Tue, 04 Mar 2014 04:06:26 GMT
Date: Fri, 07 Feb 2014 08:59:57 GMT
Connection: keep-alive
X-Cache: TCP_MEM_HIT from a168-187-253-133 (AkamaiGHost/6.14.4-12151432) (-)
X-Check-Cacheable: YES
</code></pre>

<p>In the above curl request we are sending <strong>Akamai Specific</strong> Pragma headers to fetch a static <code>png</code> file from a URL that is on Akamai. The two key response headers that important here are the last two <code>X-Cache</code> and <code>X-Check-Cacheable</code>. Below is a curl request to a asset which is not cached by Akamai.</p>

<pre><code> ~  curl -H &quot;Pragma: akamai-x-cache-on&quot; -H &quot;Pragma: akamai-x-check-cacheable&quot; -I &quot;http://www.xcite.com&quot;

HTTP/1.1 200 OK
Server: nginx/0.8.55
Content-Type: text/html; charset=UTF-8
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
X-Served-By: 381172-web1 1.0-1549
X-Frame-Options: sameorigin
Date: Fri, 07 Feb 2014 09:09:22 GMT
Set-Cookie: frontend=kbpnphh3o3ohbmvu9j83ioigv6; expires=Fri, 07-Feb-2014 10:09:21 GMT; path=/; domain=.xcite.com; HttpOnly
X-Cache: TCP_MISS from a217-243-192-27.deploy.akamaitechnologies.com (AkamaiGHost/6.14.3.5-12122608) (-)
X-Check-Cacheable: NO
</code></pre>

<p>As you can see, <code>X-Check-Cacheable</code> here is <code>NO</code> which indicates that content is not cached on Akamai.</p>

<p>I just used 2 pragma headers for testing, there are few others pragma headers that you can use to get even more information</p>

<ul>
<li>akamai-x-cache-on</li>
<li>akamai-x-cache-remote-on</li>
<li>akamai-x-check-cacheable</li>
<li>akamai-x-get-cache-key</li>
<li>akamai-x-get-extracted-values</li>
<li>akamai-x-get-nonces</li>
<li>akamai-x-get-ssl-client-session-id</li>
<li>akamai-x-get-true-cache-key</li>
<li>akamai-x-serial-no</li>
</ul>

<p>See you next time!</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">To learn more about caching and headers go through this <a href="http://www.mnot.net/cache_docs/">awesome blog post</a>
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div>

      </div>
	
			

      </div>

      <div class="row paging">
			
          
          <div class="six columns">
            <a class="paging-link" href="/articles/programming-is-hard/"><i class="icon-left-open"></i> Programming is Hard</a>
          </div>
          

					
          <div class="paging-newer six columns">
            <a class="paging-link" href="/articles/making-the-blog-instant/">Making the Blog Instant <i class="icon-right-open"></i></a>
          </div>
          

      
       </div>


    </div>
  </div>

  
  <div class="container">
    <div class="row" id="disqus_area">
      <a href="#" id="disqus_load" onclick="return loadDisqus()">Add / View Comments</a>
<div id="disqus_thread"></div>

<script type="text/javascript">
  var disqus_shortname = 'pravj';

  function loadDisqus() {
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

  
  document.getElementById('disqus_load').style.display = 'none';
  return false;
}
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
  </div>
  


	

	

    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-48537986-1', 'auto');
  ga('send', 'pageview');
</script>

    </div>
      <div class="footer">
	<hr class="thin" />
  <p>Powered by <a href="https://gohugo.io/">Hugo</a> on <a href="https://pages.github.com/">GitHub Pages</a></p>
</div>

  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://pravj.github.io/main.js"></script>






<script async defer src="https://buttons.github.io/buttons.js"></script>



</body>
</html>
