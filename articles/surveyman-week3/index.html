<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>
    Week 3 - Surveyman - hack(pravj) | Pravendra Singh
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">

<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="My name is Pravendra Singh and I love playing with data. R(ETL)PL."/>
<meta name="keywords" content="blog, web, data, data visualization, golang, programming, python, Pravendra Singh, Pravendra, pravj, IIT, IIT Roorkee">
<meta name="author" content="Pravendra Singh">
<meta http-equiv="cleartype" content="on">

  <meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Pravendra Singh - Falling Leaves">
<meta property="og:title" content="Week 3 - Surveyman" />
<meta property="og:type" content="article" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="https://pravj.github.io/articles/surveyman-week3/" />
<meta property="og:description" content="This update is coming in a bit late, especially after the week 1 and week 2 updates posted earlier. After progressing a bit on the initial setup and features I decided to take a week off Surveyman and instead wait for the GSOC results to arrive so that I could get feedback from Emma, my mentor for this project and see if I were on the right track.
Much to my delight I got selected in GSOC to work for Surveyman!" />

<meta property="og:image" content=" http://pravj.github.io/images/pravj-monu-art.jpg "/>

<meta property="article:author" content="https://www.facebook.com/hackpravj" />
<meta property="article:publisher" content="https://www.facebook.com/hackpravj" />

  <meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@hackpravj">
<meta name="twitter:creator" content="@hackpravj">
<meta name="twitter:title" content="Week 3 - Surveyman" />
<meta name="twitter:description" content="This update is coming in a bit late, especially after the week 1 and week 2 updates posted earlier. After progressing a bit on the initial setup and features I decided to take a week off Surveyman and instead wait for the GSOC results to arrive so that I could get feedback from Emma, my mentor for this project and see if I were on the right track.
Much to my delight I got selected in GSOC to work for Surveyman!" />


<meta property="twitter:image" content=" http://pravj.github.io/images/pravj-monu-art.jpg "/>





  <link href='https://fonts.googleapis.com/css?family=Raleway:400|Source+Serif+Pro:400,300,600' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="https://pravj.github.io/styles.min.css">

  

  

  
  <link rel="apple-touch-icon" sizes="180x180" href="/images/header-images/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/images/header-images/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/header-images/favicon-16x16.png" sizes="16x16">
  <link rel="mask-icon" href="/images/header-images/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/header-images/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/images/header-images/favicon.ico">

  
  <link href="" rel="alternate" type="application/rss+xml" title="hack(pravj)" />


  
</head>


<body>
      <div class="post-header">
  <div class="container rrr">
    <div class="row">
      <div class="six columns">
        <h4><a href="/">PRAVENDRA SINGH</a></h4>
      </div>
      <div class="six columns">
        <nav>
          <ul class="nav-list">
            <li><a href="/about" title="About Me"><i class="icon-user"></i></a></li>
            <li><a href="/blog" title="Articles"><i class="icon-article-alt"></i></a></li>
            <li><a href="/projects" title="Projects"><i class="icon-github-circled"></i></a></li>
            <li><a href="/quotes" title="Quotes"><i class="icon-quote-left"></i></a></li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>




  <div class="container">
    <div class="row">

      <section>
            <h1 class="post-title">
              <a href="/articles/surveyman-week3/">Week 3 - Surveyman</a>
            </h1>

          <div class="post-content-meta">

            
              <i class="icon-calendar"></i>  
              <span class="post-date">
                <span class="post-date-month">May</span> 
                <span class="post-date-day"> 10, </span>
                <span class="post-date-year">2015</span>
              </span> 
            

            
            
                <span class="post-tag"> in </span>
                
                <a class="post-tag post-tag-react" href="https://pravj.github.io/tags/react">
                  <i class="icon-tag"></i>react</a>
                
                <a class="post-tag post-tag-surveyman" href="https://pravj.github.io/tags/surveyman">
                  <i class="icon-tag"></i>surveyman</a>
                
            

         </div>

			

      <div class="post-content">
        <p>This update is coming in a bit late, especially after the week 1 and week 2 updates posted earlier. After progressing a bit on the initial setup and features I decided to take a week off Surveyman and instead wait for the GSOC results to arrive so that I could get feedback from <a href="http://people.cs.umass.edu/~etosch/">Emma</a>, my mentor for this project and see if I were on the right track.</p>

<p>Much to my delight I got selected in GSOC to work for Surveyman! To top it all,
I was the <a href="http://google-opensource.blogspot.com/2015/05/gsoc-2015-stats-part-1-all-about.html">first ever student</a> to represent Kuwait in Google Summer of Code!</p>

<figure><img data-action="zoom" src="/images/gsoc_kuwait.png"></img>
    <figcaption> Kuwait's first time in GSOC! </figcaption>
</figure>

<p>Starting last week, I decided to organize tasks as Github issues so it&rsquo;s easier to track progress. Having specific issues for each milestone helps me write down ideas to revisit later - this could be blog posts, github repos or other random tidbits that strike my head. Secondly, it allows me to earmark commits for that specific issue which would be useful later on. See the issue on <a href="https://github.com/prakhar1989/react-surveyman/issues/9">Immutability</a> for example.</p>

<p>With that out of the way, let me quickly summarize the progress I made on the project. Specifically, I knocked out issues <a href="https://github.com/prakhar1989/react-surveyman/issues/14">#14</a>, <a href="https://github.com/prakhar1989/react-surveyman/issues/13">#13</a> and <a href="https://github.com/prakhar1989/react-surveyman/issues/6">#6</a> which primarily deal with adding the update and delete operations for all types. What that means is that Blocks and Questions can now be edited and deleted once they are created.</p>

<p>The only challenging part, I felt, was factoring in all these controls in the UI without adding any visual clutter. Filling up the blocks / questions area with various icons didn&rsquo;t feel like a good solution. As a result I spent some time talking to friends and looking for inspiration in other applications. Although I did go ahead with a simple <em>Trash</em> icon for delete, the solution for editing question text turned out to be much more interesting.</p>

<figure><img data-action="zoom" src="/images/delete_edit.png"></img>
    <figcaption> In-place editing and deletion for Questions! </figcaption>
</figure>

<p>I started off working on <a href="html5demos.com/contenteditable">HTML5 ContentEditable</a> implementation but after diving deeper and looking at some of the <a href="https://github.com/facebook/react/issues/2477">issues</a> I decided to just replace the <code>&lt;span&gt;</code> tag with an <code>input</code> when clicked. With some React awesomeness, I was able to build this in just a few lines of code -</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="c1">// file - js/components/Question.js</span>

<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
            <span class="nx">defaultValue</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">qtext</span><span class="p">}</span>
            <span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="nx">width</span><span class="o">:</span> <span class="mi">200</span><span class="p">}}</span>
            <span class="nx">onBlur</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleEdit</span><span class="p">}</span>
            <span class="nx">onKeyPress</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleEdit</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
            
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;qtext-area&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;qtext&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">toggleInput</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">editing</span> <span class="o">?</span> <span class="nx">input</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">qtext</span> <span class="p">}</span>
        <span class="o">&lt;</span><span class="err">/span&gt;</span>
        <span class="o">&lt;</span><span class="nx">i</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;ion-trash-b&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleDelete</span><span class="p">}</span><span class="o">&gt;&lt;</span><span class="err">/i&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">},</span> 
<span class="nx">toggleInput</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">editing</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="p">},</span>
<span class="nx">handleEdit</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;blur&quot;</span> <span class="o">||</span> 
       <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;keypress&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;Enter&quot;</span><span class="p">))</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">editing</span><span class="o">:</span> <span class="kc">false</span> <span class="p">});</span>

        <span class="c1">// if the new value is blank do nothing</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span> 
        <span class="p">}</span>
        <span class="nx">SurveyActions</span><span class="p">.</span><span class="nx">saveEditText</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p>For a more complete breakdown, feel free to the browse the issues linked above and view the source code.</p>

<p>If you&rsquo;ve been following closely, then you might have noticed that Options are still not editable. Well, the short answer is that while looking around for ways to factor in edit / delete in the small-sized element I came across a neat idea which eventually lead into me building a standalone <a href="http://github.com/prakhar1989/react-tags">react component</a>. For the long answer, wait till next week!</p>

      </div>
	
			

      </div>

      <div class="row paging">
			
          
          <div class="six columns">
            <a class="paging-link" href="/blog/development-story-of-puzzl/"><i class="icon-left-open"></i> Development story of puzzl</a>
          </div>
          

					
          <div class="paging-newer six columns">
            <a class="paging-link" href="/articles/surveyman-week4/">Week 4 - Surveyman <i class="icon-right-open"></i></a>
          </div>
          

      
       </div>


    </div>
  </div>

  
  <div class="container">
    <div class="row" id="disqus_area">
      <a href="#" id="disqus_load" onclick="return loadDisqus()">Add / View Comments</a>
<div id="disqus_thread"></div>

<script type="text/javascript">
  var disqus_shortname = 'pravj';

  function loadDisqus() {
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

  
  document.getElementById('disqus_load').style.display = 'none';
  return false;
}
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
  </div>
  


	

	

    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-48537986-1', 'auto');
  ga('send', 'pageview');
</script>

    </div>
      <div class="footer">
	<hr class="thin" />
  <p>Powered by <a href="https://gohugo.io/">Hugo</a> on <a href="https://pages.github.com/">GitHub Pages</a></p>
</div>

  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://pravj.github.io/main.js"></script>






<script async defer src="https://buttons.github.io/buttons.js"></script>



</body>
</html>
